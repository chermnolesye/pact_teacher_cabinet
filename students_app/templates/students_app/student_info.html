<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Студенты</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    <link rel="stylesheet" href="{% static 'css/manage.css' %}" />
</head>
<body>
    <div id="header-container"></div>
    <div class="students-container">
        <h2 class="highlighted-header">
            {{ student.full_name }}
        </h2>

        <form method="get" id="text-search-form">
            <div class="search-bar">
                <input type="text" name="q" placeholder="Поиск по названию" value="{{ query }}">
        
                <button type="submit" name="search" class="search">
                    <svg width="20" height="20" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M50.9583 50.9583L61.1666 61.1666M16.6875 6.53745C22.5094 3.17781 29.3541 2.04905 35.9465 3.36146C42.5389 4.67386 48.4294 8.33792 52.5208 13.6711C56.6122 19.0043 58.6254 25.6429 58.1854 32.3502C57.7455 39.0576 54.8823 45.3763 50.1293 50.1293C45.3763 54.8823 39.0576 57.7455 32.3502 58.1854C25.6429 58.6254 19.0043 56.6122 13.6711 52.5208C8.33792 48.4294 4.67386 42.5389 3.36146 35.9465C2.04905 29.3541 3.17781 22.5094 6.53745 16.6875" stroke="#FFFDFD" stroke-width="4" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </form>

        <div class="new-text-button">
            <a href="{% url 'teacher_load_text' %}">
              <button>
                <svg width="24" height="24" viewBox="0 0 54 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M34.5 27H27M27 27H19.5M27 27V19.5M27 27V34.5M14.5 5.34503C18.2988 3.14728 22.6113 1.99327 27 2.00003C40.8075 2.00003 52 13.1925 52 27C52 40.8075 40.8075 52 27 52C13.1925 52 2 40.8075 2 27C2 22.4475 3.2175 18.175 5.345 14.5" stroke="white" stroke-width="4" stroke-linecap="round"/>
                </svg>      
                Новый текст
              </button>
            </a>
        </div>

        <div class="texts-result">
            <div class="header-card">
                <div class="text-name">
                    Название
                </div>
                <div class="text-type">
                    Тип текста
                </div>
                <div class="text-date">
                    Дата создания
                </div>
                <div class="text-check">
                    Проверка ошибок
                </div>
                <div class="text-grade">
                    Оценка
                </div>
                <div class="text-errors">
                    Количество ошибок
                </div>
            </div>

            {% for text in texts %}
            <div class="student-card">
                <div class="text-name">
                    <a href="{% url 'annotate_text' %}?text_id={{ text.idtext }}">{{ text.header }}</a>                    
                </div>
                <div class="text-type">
                    {{ text.text_type }}
                </div>
                {% if text.createdate %}
                    <div class="text-date">
                        {{ text.createdate }}
                    </div>
                {% else %}
                    <div class="text-date" style="color: #6C757D;">
                        Неизвестно
                    </div>
                {% endif %}
                <div class="text-check">
                    {% if text.errorcheckflag %}
                        <svg class="bi text-success" xmlns="http://www.w3.org/2000/svg" height="1.6em" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke="#28a745" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m8.5 12.5 2 2 5-5"></path>
                            <path stroke="#28a745" stroke-linecap="round" stroke-width="1.5" d="M7 3.34A10 10 0 1 1 3.34 7"></path>
                        </svg>
                    {% else %}
                        <svg class="bi text-secondary" xmlns="http://www.w3.org/2000/svg" height="1.6em" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-width="1.5" d="m14.5 9.5-5 5m0-5 5 5M7 3.34A10 10 0 1 1 3.34 7"></path>
                        </svg>
                    {% endif %}
                </div>

                {% if text.get_textgrade_display %}
                    <div class="text-grade">
                        {{ text.get_textgrade_display }}
                    </div>
                    <div class="text-errors">
                        {{ text.error_count }}
                    </div>
                {% else %}
                    <div class="text-grade">
                    </div>
                    <div class="text-errors">
                    </div>
                {% endif %}                
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>
